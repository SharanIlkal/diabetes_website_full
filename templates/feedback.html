<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Feedback — DiabPredict</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<style>
:root{
  --nav-grad-1:#4f46e5;
  --nav-grad-2:#06b6d4;
  --card-radius:14px;
}

body{
  background:linear-gradient(180deg,#f8fafc,#ffffff);
  min-height:100vh;
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
}

/* Card */
.card{
  border-radius:var(--card-radius);
  box-shadow:0 6px 20px rgba(15,23,42,0.06);
  background:#fff;
}

/* Navbar */
.navbar-custom{
  background:linear-gradient(90deg,var(--nav-grad-1),var(--nav-grad-2));
  border-radius:12px;
  padding:.35rem .75rem;
}
.navbar-custom .navbar-brand,
.navbar-custom .nav-link{
  color:#fff;
  font-weight:500;
}

.nav-pills .nav-link{
  border-radius:999px;
  padding:.45rem .9rem;
  margin:0 .25rem;
  color:rgba(255,255,255,0.9);
  border:1px solid rgba(255,255,255,0.08);
  transition:0.2s;
}
.nav-pills .nav-link.active,
.nav-pills .nav-link:hover{
  background:rgba(255,255,255,0.16);
  transform:translateY(-2px);
}

/* Toggler dots */
.toggler-dot{
  width:10px;height:10px;border-radius:50%;
  display:inline-block;margin-right:6px;
}
.toggler-dot.one{background:#fff;opacity:.95}
.toggler-dot.two{background:rgba(255,255,255,0.75)}
.toggler-dot.three{background:rgba(255,255,255,0.55)}
</style>
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-custom shadow-sm my-3 mx-3">
  <div class="container-fluid px-3">

    <a class="navbar-brand d-flex align-items-center gap-2" href="/">
      <span style="width:36px;height:36px;border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:center">
        <i class="bi bi-heart-pulse-fill" style="color:var(--nav-grad-1)"></i>
      </span>
      Diabetes prediction
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">
      <span class="toggler-dot one"></span>
      <span class="toggler-dot two"></span>
      <span class="toggler-dot three"></span>
    </button>

    <div class="collapse navbar-collapse" id="navmenu">
      <ul class="navbar-nav ms-auto align-items-center nav-pills">
        <li class="nav-item"><a class="nav-link" href="/"><i class="bi bi-house-door-fill me-1"></i> Home</a></li>
        <li class="nav-item"><a class="nav-link" href="/docs"><i class="bi bi-book-fill me-1"></i> Docs</a></li>
        <li class="nav-item"><a class="nav-link" href="/contact"><i class="bi bi-envelope-fill me-1"></i> Contact</a></li>
        <li class="nav-item"><a class="nav-link active" href="/feedback"><i class="bi bi-chat-dots-fill me-1"></i> Feedback</a></li>
      </ul>
    </div>

  </div>
</nav>

<main class="container py-4">

  <div class="row justify-content-center">
    <div class="col-lg-7">
      <div class="card p-4">

        <h4>Send feedback</h4>
        <p class="text-muted">Tell us what’s working well and what needs improvement.</p>

        <form id="feedbackForm" class="row g-3">

          <div class="col-12">
            <label class="form-label">How would you rate the demo?</label>
            <select id="rating" class="form-select" style="max-width:170px">
              <option value="5">5 — Excellent</option>
              <option value="4">4 — Good</option>
              <option value="3">3 — Okay</option>
              <option value="2">2 — Poor</option>
              <option value="1">1 — Bad</option>
            </select>
          </div>

          <div class="col-12">
            <label class="form-label">What did you try?</label>
            <input id="tried" class="form-control" placeholder="Example: Tested multiple inputs, CSV upload…">
          </div>

          <div class="col-12">
            <label class="form-label">Additional comments (optional)</label>
            <textarea id="notes" class="form-control" rows="4"></textarea>
          </div>

          <div class="col-12 d-flex justify-content-end">
            <button id="anonToggle" class="btn btn-outline-primary" type="button">Send anonymously</button>
            <button type="submit" class="btn btn-primary ms-2">Submit</button>
          </div>

        </form>

        <hr>

        <h6 class="mb-2">Recent feedback</h6>
        <div class="list-group">
          <div class="list-group-item">“Very clear UI” — anonymous</div>
          <div class="list-group-item">“Add more explanations for each metric” — user@example.com</div>
        </div>

      </div>
    </div>
  </div>

</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
let anonymous = false;

document.getElementById("anonToggle").addEventListener("click", () => {
  anonymous = !anonymous;
  document.getElementById("anonToggle").textContent = anonymous
    ? "Sending anonymously"
    : "Send anonymously";
});

document.getElementById("feedbackForm").addEventListener("submit", (e) => {
  e.preventDefault();

  const payload = {
    rating: document.getElementById("rating").value,
    tried: document.getElementById("tried").value,
    notes: document.getElementById("notes").value,
    anonymous
  };

  fetch("/feedback", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(payload)
  })
  .then(r => {
    alert(r.ok ? "Thanks for the feedback!" : "Server not available");
    if (r.ok) document.getElementById("feedbackForm").reset();
  })
  .catch(() => alert("Network error"));
});
</script>

</body>
</html>
